---
title: "打破工具链的桎梏，企业需要一体化 DevOps 平台"
summary: "Single Devops Platform Gitlab"
authors: ["guoxudong"]
tags: ["gitlab"]
categories: ["gitlab"]
date: 2021-10-05T22:08:48+08:00
lastmod: 2021-10-05T22:08:48+08:00
draft: true
type: blog
image: ""
---
## 深入人心的 DevOps 文化

>DevOps（Development 和 Operations 的组合词）是一种重视“软件开发人员（Dev）”和“IT 运维技术人员（Ops）”之间沟通合作的文化、运动或惯例。透过自动化“软件交付”和“架构变更”的流程，来使得构建、测试、发布软件能够更加地快捷、频繁和可靠。
>传统的软件组织将开发（Dev）、IT 运维和质量保障（QA）设为各自分离的部门，在这种环境下如何采用新的开发方法（例如敏捷软件开发），是一个重要的课题。按照从前的工作方式，开发和部署，不需要 IT 支持或者 QA 深入的跨部门的支持；而现在却需要极其紧密的多部门协作。而 DevOps 考虑的还不止是软件部署，它是一套针对这几个部门间沟通与协作问题的流程和方法。
>DevOps 的引入能对产品交付、测试、功能开发和维护（包括──曾经罕见但如今已屡见不鲜的──“热补丁”）起到意义深远的影响。在缺乏 DevOps 能力的组织中，开发与运维之间存在着信息“鸿沟”──例如运维人员要求更好的可靠性和安全性，开发人员则希望基础设施响应更快，而业务用户的需求则是更快地将更多的特性发布给最终用户使用。这种信息鸿沟就是最常出问题的地方。

以上内容来自 wikipedia，非常准备的描述了 DevOps 是一种文化、运动或惯例，只要是通过自动化的方式加快软件的构建、测试和发布，用来推动多部门紧密合作，减少沟通与协作成本的方式都可以称之为 DevOps。而在与客户的交流中发现，无论是新兴的互联网创业公司，还是老牌的银行与制造业公司，大家都是用自己的方式来实践 DevOps 文化，越来越多的企业和开发者已经将 DevOps 作为团队协作的默认选项，DevOps 文化早以深入人心。

## DevOps 时代的烦恼

随着 DevOps 文化的深入，越来越多的企业拥有了自己的 DevOps 团队和 DevOps 工程师，在招聘 APP 上可以看到对 DevOps 工程师的需求量与日俱增，薪资也持续走高，可以说 DevOps 的时代已经到来。传统的 DevOps 体系更多的是进行 DevOps 工具链的集成工作，通过脚本或自研平台将整个 DevOps 流程以自动化的方式进行整合，形成一个完整的 DevOps 工具链，这样就完成了 DevOps 从文化到实践方式的转变。但随着工具链越来越长，其上运行的软件越来越多，传统的 DevOps 不可避免的变的难以维护且隐患丛生。

### 持续走高的维护成本

![传统 DevOps 体系](https://tva4.sinaimg.cn/large/003aQKoZgy1gv5efb302qj61tk0z67wh02.jpg)

传统 DevOps 体系需要同集成大量的（开源/闭源）软件来完成 DevOps 工具链的构建，DevOps 需要同时维护工具链上所有的软件以保证 DevOps 流程的顺利运行。同时不同角色的团队成员需要登陆和切换不同的软件来完成日常工作，而不同软件的功能可能还存在交叉。这就是的 DevOps 不得不付出更多的工作量来调整、测试这些功能，还要花费更多的时间给各个团队成员进行讲解并且说服他们按照设计好的方式使用 DevOps，随着团队人数的增长，工作量也呈指数型增长。

而 DevOps 工具链上软件的维护则又是一大噩梦，无论您使用的是开源还是闭源软件，都需要进行迭代升级，不同的软件升级周期和升级要求不同，DevOps 团队需要花费大量的人力来完成这些软件的升级维护，有时可能会因为一个软件的升级维护导致整个 DevOps 工具链不可用，影响整个团队的工作，这也是为什么很多团队 DevOps 工具链上的软件都使用老旧版本的原因。

### 核心人员变动导致的工具链崩溃

为解决上文中提到不同软件存在功能交叉的问题，有的团队会自研 DevOps 平台，并将这些软件都集成在 DevOps 平台上使用。这样做看似解决了 DevOps 软件访问入口的问题，实则引入了更多的复杂性。不同软件的 Open API 变化使得软件升级变的更加困难，而自研 DevOps 平台需要团队除了维护 DevOps 工具链上的软件之外，还要花费更多的人力物力去维护自研平台。而核心维护人员的离职可能导致的就是整个 DevOps 工具链的崩溃，平台集成细节、各个部门的秘钥管理、权限的分配随便拿出一个都够接手者头疼一段时间了。

### 工具链的安全隐患

使用旧版软件除了无法使用新版功能以外，还存在各种各样的安全隐患。不及时更新版本，往往就是受到黑客攻击的原因之一，而 DevOps 工具链又有着非常高的权限，往往拥有部署、变更甚至购买服务器实例和使用云服务的权限，一次黑客攻击就可能造成难以估量且无法挽回的损失。

## 做工具链的主人

既然传统 DevOps 体系难以为继，那么有没有什么办法可以解决这些问题呢？我认为统一用户模型、统一数据存储、统一权限管理、统一用户界面的 **一体化 DevOps 平台** 是一个不错的选择，DevOps 团队只需维护一个平台即可获得全部 DevOps 功能的使用，同时各种开箱即用的功能更是拉平了用户学习曲线，可以让团队在更短的时间内形成战斗力，在激烈的市场竞争中先人一步，占据优势。

![一体化 DevOps 平台](https://tva3.sinaimg.cn/large/003aQKoZgy1gv5fgnzdvjj61si0za4jq02.jpg)

### 极狐GItLab 为何要做一体化 DevOps 平台

GitLab 为开发者熟知是因为其 SCM（源代码管理）功能，目前占据七成私有化代码管理市场，同样也是 DevOps 工具链中不可或缺的一环。GitLab 也是早早就开始了 DevOps 体系的探索，经过 100,000+ 企业机构
和千万级用户的洗礼，逐步发展为  **一体化 DevOps 平台**，具有以下优点：

- 单一来源：管理项目本身，而不是多个工具。覆盖 DevSecOps 全流程的端到端平台，一个界面、一种权限模型、统一数据存储方式。
- 持续一切：一劳永逸地架起开发和运营之间的桥梁。业界领先 CI/CD 工具帮助团队实现高效协作，挑战更强大、可扩展的、端到端自动化。
- 实时安全：通过全面的内置功能实现对安全、代码质量和漏洞的自动化管理。

![十年发展](https://tva4.sinaimg.cn/large/003aQKoZgy1gv5fq5m4zyj61ts110hdt02.jpg)

GitLab 以源代码管理为中心构建完成的 DevOps 流程闭环：

- 项目管理：完善的 Epic 和 Issue 及其生成的看板和路线图完成任务的管理和展示。
- CI/CD：简单易用的 GitLab Runner 完成各类 Ci/CD 任务，并提供多种开箱即用的 Auto DevOps 模板，让用户无需配置 Pipeline 即可完成全套的 CI/CD 流程。
- 制品库管理：还提供了内置的二进制包与容器镜像管理用来存储各种制品。
- DevSecOps：开箱即用的各类安全扫描，让用户无需过多的配置即可完成多种安全扫描。

![架构图](https://tvax1.sinaimg.cn/large/003aQKoZgy1gv5h2mx03zj61to110b2902.jpg)

### 一体化与集成其他项目并不冲突

秉承开源开放的策略，不仅可以作为一体化 DevOps 平台，还可以通过与其他应用软件的集成，在不给用户带来更多负担的情况下，为用户提供更多更优质的 DevOps 能力。与其他应用的集成，也有专门的团队维护，在其升级后保证与 GitLab 的正常集成，而非放手不管。

![集成与拓展](https://tvax3.sinaimg.cn/large/003aQKoZgy1gv5gbou3sej61tq10uav402.jpg)

### 开源开放、自主可控

开源：作为一个开源项目极狐GitLab 标准版以 MIT 许可证进行开源，完全符合 OSD 标准。并且标准版包含极狐GitLab 所有的核心功能，可以满足用户大多数的需求。

开放：极狐GitLab 企业版/旗舰版代码同样是源码可见（source avaliable）的，并没有设置单独的私有仓库来保存企业版代码，而是将全部代码开放给了社区和用户，区别只在于企业版和旗舰版采用的是商业许可证，用户需要购买许可证才能合法使用企业版和旗舰版的功能。

除了代码以外，还可以在相关 Issue 中看到极狐 GitLab 的协作流程以及产品设计，同时可以通过 Handbook 了解更多关于极狐GitLab 的信息，Handbook 是极狐GitLab 所有工作的为单一信息源（Single Source of Truth - SSOT）。整个团队是以公开透明的方式进行协作，开放所有代码、文档以及最佳实践，完全自主可控，任何外部因素都不会影响到开源开放的核心理念。

### DevSecOps

单独将 DevSecOps 列出来，是因为当今的网络安全环境相较之前更加复杂，传统的在项目发布之前安全工程师才介入的模式已经边的不再适用。目前需要研发工程师、测试工程师、运维工程师、安全工程师均参与其中，互相协作，共建安全。而 DevSecOps 则是将安全最佳实践集成到 DevOps 工作流中，通过流水线自动化执行，迅速提升认知，形成反馈闭环。

通过将应用程序安全和合规前置到软件开发生命周期，基于自动化流水线对软件全生命周期进行全面的安全扫描和防护，最后提供全面且结构化的安全报告供团队和安全部门进行分析，并结合议题功能进行安全问题修复的计划和跟踪。基于“安全左移”模式，每一次代码提交，触发安全门禁，即时反馈潜在的安全问题，提供持续的安全性测试能力。

![Gartner 2021](https://tvax1.sinaimg.cn/large/003aQKoZgy1gv5hconz1yj61t210engg02.jpg)

GitLab 作为 2021 年唯一进入 Gartner 应用安全测试挑战者象限的 DevOps 工具厂商在这方面投入了大量的人力物力，主要体现在以下几点：

- 应用安全测试和修复：每一次代码提交，极狐GitLab 都会向开发者提供可操作的漏洞发现，同时帮助安全专家通过解决方案管理剩余漏洞。
- 云原生应用程序保护： 极狐GitLab 保护功能可以帮助您监控和保护云原生软件环境。政策合规性和可审计性。通过极狐GitLab的MR审批、端到端透明度（谁改变了什么，什么时候，在哪里），以及一个合规的仪表板和协同控制，帮助您满足合规需求。
- SDLC 平台安全性：每一次代码提交，极狐GitLab 都会向开发者提供可操作的漏洞发现，同时帮助安全专家通过解决方案管理剩余漏洞。

GitLab 通过开箱即用的方式，仅需少量配置，即可自动识别各种编程语言并进行相应的安全扫描。这大大降低了研发、测试和运维工程师这类非安全工程师使用和维护自己代码安全性的门槛，同时还提供了统一入口以及  UI 视图展示，这使得安全工程师可以更好的了解项目整体安全漏洞及合规性，减少了在多个安全软件之间切换浪费的时间和造成遗漏的可能。

## 结语

一体化 DevOps 平台的诞生来源于 DevOps 技术的发展以及用户的客观需求，随着企业内接入 DevOps 平台用户的飞速增加，DevOps 平台的维护难度也呈指数型增长，越来越多的 DevOps 工程师意识到了这一点。

经过十年的发展，GItLab 早以不只是一款 SCM 软件，多年的积累和每月一个新版发布，不断的迭代使得 GItLab 作为 **一体化 DevOps 平台** 的能力日趋成熟，GitLab CI 也成为了增长最快的 CI/CD 解决方案，越来越多的用户开始使用 GItLab 作为其 DevOps 体系的核心工具并从中受益。在社区方面，GItLab 以其“开源开放”的理念受到社区和用户的支持和信任，来自 3000 多名贡献者的 9000 多条 merge request 被合并, 包括来自诸如西门子, CERN, 和 Creationline 等客户和组织的贡献。

## 作者

郭旭东 极狐(GitLab)云原生架构师，阿里云 MVP，云原生社区管委会成员&上海站站长。热爱开源，专注于 DevOps 和云原生技术的实践和分享，目前是 CNCF SandBox 项目 KubeVela / ChaosBlade 的 Maintainer。

